<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="fr"
    xmlns:p="http://primefaces.org/ui"
    xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

	<h:head>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<title>Liste des utilisateurs existantes</title>
	</h:head>
	<h:body> 
   		<div class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container">
				<section id="sidebar" style="margin:0px">
					<div class="navbar-collapse collapse">
						<ul class="nav navbar-nav navbar-left">
							<li><a href="/Medecine/MainPage.xhtml">Acceuil</a></li>
							<li><a href="/Medecine/connexion.xhtml">Deconnexion</a></li>
							<li><a href="#two">Admin</a></li>
							<li><a href="#three">help</a></li>
						</ul>
					</div>
				</section>
			</div>
		</div>
		<h:form style="margin-top:60px">
			<p:fieldset legend="Liste des utilisateurs enregistrées">
	 			<p:dataTable selectionMode="single" var="user" value="#{utilisateurManagedBeanList.userList}">
		
					<p:column headerText="Id de l'utilisateur">
	           		 <h:outputText value="#{user.id}" />
	       		 </p:column>
	        <p:column headerText="L'Email de l'utilisateur">
	            <h:outputText value="#{user.email}" />
	        </p:column>
	        <p:column headerText="Le mot de pass de l'utilisateur">
	            <h:outputText value="#{user.password}" />
	        </p:column>
	        <p:column headerText="Nom de l'utilisateur">
	            <h:outputText value="#{user.username}" />
	        </p:column>
	        <p:column headerText="Rôle de l'utilisateur">
	            <h:outputText value="#{user.role.description}" />
	        </p:column>
	         <p:column>
	        <p:commandButton action="#{utilisateurManagedBeanList.detail(user)}" value="Details" />
	        </p:column>
	        <p:column>
	        <h:commandButton action="#{utilisateurManagedBeanList.edit(user)}" value="Update" />
	        </p:column>
	        <p:column>
	        <p:commandButton action="#{utilisateurManagedBeanList.supprimer(user)}" value="Delete" />
	        </p:column> 
	    </p:dataTable>
		</p:fieldset>
		<p:fieldset legend="Entrer les informations de l'Utilisateur">
		    <p:outputLabel>Adresse Email :</p:outputLabel>
		    <p:inputText id="Adresse" value="#{inscriptionManagedBean.user.email}" required="true" requiredMessage="#{msg['utilisateur.Adresse']}" />
		     <p:message id="mail" for="Adresse" errorClass="erreur" label="Adresse Email"/>
		    <br/><br/>
		    
		    <p:outputLabel>Mot de Passe :</p:outputLabel>
		    <h:inputSecret id="MotdePasse" value="#{inscriptionManagedBean.user.password}" required="true" requiredMessage="#{msg['utilisateur.MotdePasse']}" />
		    <p:message id="pasword" for="MotdePasse" errorClass="erreur" label="MotdePasse"/>
		    <br/><br/>
		    
		    <p:outputLabel>Confirmation du Mot de Passe :</p:outputLabel>
		    <h:inputSecret id="Confirmation" value="#{inscriptionManagedBean.confirmationPassword}" required="true" requiredMessage="#{msg['utilisateur.Confirmation']}" />
		     <p:message id="ConfirmationduMotdePasse" for="Confirmation" errorClass="erreur" label="Confirmation du Mot de Passe"/>
		    <br/><br/>
		    
		    <p:outputLabel>Nom de l'Utilisateur :</p:outputLabel>
		    <p:inputText id="Nom" value="#{inscriptionManagedBean.user.username}" required="true" requiredMessage="#{msg['utilisateur.Nom']}" />
		    <br/><br/>
		    
		    <p:panelGrid columns="1" >
		     
		          <p:outputLabel for="listeRole" value="Role de l'utilisateur :" />
		        <p:selectOneMenu name="role" id="listeRole" 
		        value="#{inscriptionManagedBean.user.role.id}" style="width:125px"  >
		             <f:selectItems value = "#{ inscriptionManagedBean.roles.entrySet()}"  var ="role" 
		                             filterBy="#{column.property}"
		                             
		                             itemValue="#{role.key}" itemLabel="#{role.value.description}" />   
		        </p:selectOneMenu>
		       
		 		</p:panelGrid>
		    <br/><br/>
		    
		    <h:commandButton value="Inscription" action="#{inscriptionManagedBean.inscription}"/>
     </p:fieldset>
	
	
		</h:form>
	</h:body>
</html>
